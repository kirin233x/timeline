# Claude Code Prompt — iOS 宝宝照片时间线应用

你是一名资深 iOS 工程师和产品型开发者，请使用 **Swift + SwiftUI** 帮我实现一个 iOS 应用。  
该应用是一个 **基于本地相册的宝宝成长时间线应用**。

---

## 一、技术要求

- 开发语言：Swift
- UI 框架：SwiftUI
- 架构：MVVM
- 相册访问：Photos.framework（PHAsset）
- 地图展示：MapKit
- EXIF 解析：ImageIO（CGImageSource）
- 本地存储：
  - 不复制照片文件
  - 仅存储 PHAsset.localIdentifier
  - 宝宝信息和时间线数据可使用 SwiftData / CoreData / UserDefaults

---

## 二、核心功能需求

### 1️⃣ 欢迎页 / 初始化流程（Onboarding）

应用首次启动时展示欢迎页面，引导用户创建宝宝档案，包括：

- 宝宝头像（可从相册选择）
- 宝宝昵称
- 出生日期

出生日期将作为时间线计算的基准。

---

### 2️⃣ 宝宝时间线（Timeline）

- 用户可以创建一个宝宝时间线
- 从系统相册中选择多张照片
- **不复制或存储照片文件**
- 仅记录照片的 `PHAsset.localIdentifier`

时间线规则：

- 读取每张照片的 EXIF 拍摄时间（DateTimeOriginal）
- 如果 EXIF 缺失，则使用 `PHAsset.creationDate`
- 按时间排序展示照片
- 根据宝宝出生日期，自动计算并标记关键时间节点：
  - 出生当天（Day 0）
  - 第 7 天
  - 满月（30 天）
  - 百天
  - 周岁（365 天）

示例：
> 宝宝第 1 天、第 30 天、第 365 天分别对应哪些照片

---

### 3️⃣ 时间线 UI 展示

- 使用 SwiftUI 实现纵向时间线
- 每个时间点显示：
  - 日期
  - 宝宝年龄（第 X 天 / X 月）
  - 对应的照片缩略图
- 支持点击照片进入详情页

---

### 4️⃣ 照片详情页

点击照片后，展示完整信息：

#### 基本信息
- 拍摄时间（格式化显示）
- 宝宝当时的年龄（自动计算）

#### EXIF 信息
- 拍摄设备（iPhone 型号 / 相机）
- 拍摄参数（如有）

#### 拍摄地点
- 若照片包含 GPS 信息：
  - 使用 MapKit 在地图上展示拍摄位置
  - 显示经纬度或城市名称
- 若无位置信息，显示友好提示

---

### 5️⃣ 权限与隐私处理

- 合理处理以下权限：
  - 相册访问权限
  - 定位权限（仅用于展示已有 EXIF GPS）
- 若用户拒绝权限：
  - 显示引导说明
  - 不导致应用崩溃

---

## 三、代码质量要求

- 清晰的模块划分（View / ViewModel / Service）
- 合理封装相册读取逻辑
- 可扩展性设计（支持多个宝宝）
- 关键逻辑添加注释
- SwiftUI 代码符合 Apple Human Interface Guidelines

---

## 四、你需要输出的内容

1. 项目整体结构说明
2. 核心数据模型设计
3. 相册读取与 EXIF 解析示例代码
4. 时间线计算逻辑
5. SwiftUI 时间线 UI 示例
6. 照片详情页（含地图）示例实现

请以**可直接用于开发的代码和说明为目标**，而不是只给概念性描述。

